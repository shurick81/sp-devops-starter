{
    "builders": [
        {
            "type": "virtualbox-iso",
            "iso_checksum": "{{user `iso_checksum`}}",
            "iso_checksum_type": "{{user `iso_checksum_type`}}",
            "iso_url": "{{user `iso_url`}}",
            "floppy_files": [
                "{{user `autounattend`}}",
                "winrm.ps1"
            ],
            "guest_additions_mode": "attach",
            "guest_os_type": "Windows10_64",
            "headless": "{{user `headless`}}",
            "shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
            "disk_size": "{{user `disk_size`}}",
            "vboxmanage": [
                [
                    "modifyvm",
                    "{{.Name}}",
                    "--memory",
                    "{{user `memory_size`}}"
                ],
                [
                    "modifyvm",
                    "{{.Name}}",
                    "--cpus",
                    "{{user `cpus`}}"
                ]
            ],
            "boot_wait": "2m",
            "communicator": "winrm",
            "winrm_username": "administrator",
            "winrm_password": "Fractalsol"
        },
        {
            "type": "vmware-iso",
            "iso_url": "{{user `iso_url`}}",
            "iso_checksum_type": "{{user `iso_checksum_type`}}",
            "iso_checksum": "{{user `iso_checksum`}}",
            "headless": "{{user `headless`}}",
            "boot_wait": "2m",
            "ssh_username": "vagrant",
            "ssh_password": "vagrant",
            "ssh_wait_timeout": "2h",
            "shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
            "guest_os_type": "windows8srv-64",
            "tools_upload_flavor": "windows",
            "disk_size": "{{user `disk_size`}}",
            "vnc_port_min": 5900,
            "vnc_port_max": 5980,
            "floppy_files": [
                "{{user `autounattend`}}",
                "winrm.ps1"
            ],
            "vmx_data": {
                "RemoteDisplay.vnc.enabled": "false",
                "RemoteDisplay.vnc.port": "5900",
                "memsize": "{{user `memory_size`}}",
                "numvcpus": "{{user `cpus`}}",
                "scsi0.virtualDev": "lsisas1068"
            }
        },
        {
            "type": "parallels-iso",
            "iso_url": "{{user `iso_url`}}",
            "iso_checksum_type": "{{user `iso_checksum_type`}}",
            "iso_checksum": "{{user `iso_checksum`}}",
            "boot_wait": "2m",
            "ssh_username": "vagrant",
            "ssh_password": "vagrant",
            "ssh_wait_timeout": "2h",
            "shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
            "guest_os_type": "win-10",
            "parallels_tools_flavor": "win",
            "disk_size": "{{user `disk_size`}}",
            "floppy_files": [
                "{{user `autounattend`}}",
                "winrm.ps1"
            ]
        }
    ],
    "provisioners": [
        {
            "type": "powershell",
            "script": "VirtualBox/installadditions.ps1",
            "only": ["virtualbox-iso"]
        },
        { "type": "powershell", "script": "rdpenable.ps1" },
        { "type": "powershell", "script": "PackageManagementProviderResource.ps1" },
        { "type": "powershell", "script": "basepsmodules.ps1" },
        { "type": "powershell", "script": "userpsmodules.ps1" },
        { "type": "powershell", "script": "userbin.ps1" }
    ],
    "post-processors": [
        {
            "type": "vagrant",
            "output": "sp-win10-user.box"
        }
    ],
    "variables": {
        "iso_url": "http://care.dlservice.microsoft.com/dl/download/B/8/B/B8B452EC-DD2D-4A8F-A88C-D2180C177624/15063.0.170317-1834.RS2_RELEASE_CLIENTENTERPRISEEVAL_OEMRET_X64FRE_EN-US.ISO",
        "iso_checksum_type": "sha1",
        "iso_checksum": "6C60F91BF0AD7B20F469AB8F80863035C517F34F", 
        "autounattend": "win10/Autounattend.xml",
        "headless": "true",
        "cpus": "4",
        "memory_size": "2048",
        "disk_size": "61440"
    }
}